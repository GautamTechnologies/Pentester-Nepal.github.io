$_name = document.location.href.split('/').slice(-2)[0];
$_path = '/' + document.location.href.split('/').slice(-2)[0] + '.json'
$_url = document.location.href.split('/').slice(0,-1).join('/') + $_path;
fetch( $_url ).then( r => r.json().then( j => {
  j.forEach( content => {
    let el = document.createElement('a');
    let br = document.createElement('br');
    let content_path = content.path;
    if ( content.type === "markup" ) {
      el.innerText = content.name;
    } else if ( content.type === "markdown" ) {
      content_path = `/main.html?path=${content_path}&from=${$_name}`;
      el.innerText = content.name;
    } else if ( content.type === "remote-markdown" ) {
      content_path = `/main.html?path=${content_path}&remote=true&from=${$_name}`;
      el.innerText = content.name;
    }; if ( content_path && el.innerText ) {
      el.href = content_path; el.setAttribute('target', '_blank');
      document.body.appendChild(el); document.body.appendChild(br);
    }
  });
}));
